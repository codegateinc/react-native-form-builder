var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.validateFormFields=exports.prepareFormInitialState=void 0;var _objectSpread2=_interopRequireDefault(require("@babel/runtime/helpers/objectSpread"));var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _utils=require("./lib/utils");var _types=require("./types");var prepareFormInitialState=function prepareFormInitialState(formConfig){var preparedPairs=_utils.R.toPairs(formConfig).map(function(_ref){var _ref2=(0,_slicedToArray2.default)(_ref,2),fieldName=_ref2[0],config=_ref2[1];if(config.fieldType===_types.FormField.Input){var isValidInputValue=_utils.R.is(String,config.value)||_utils.R.is(Number,config.value);return[fieldName,{isValid:Boolean(config.value),isRequired:config.isRequired,value:isValidInputValue?config.value:'',fieldType:config.fieldType}];}var validatedValue=_utils.R.cond([[function(_ref3){var fieldType=_ref3.fieldType;return fieldType===_types.FormField.Checkbox;},function(_ref4){var value=_ref4.value;return _utils.R.is(Boolean,value)?value:false;}],[function(_ref5){var fieldType=_ref5.fieldType;return fieldType===_types.FormField.SelectPicker;},function(_ref6){var options=_ref6.options,value=_ref6.value;var isValidValue=options.some(function(option){return option.value===value;});return isValidValue?value:undefined;}]])(config);return[fieldName,{isRequired:config.isRequired,fieldType:config.fieldType,value:validatedValue}];});return _utils.R.fromPairs(preparedPairs);};exports.prepareFormInitialState=prepareFormInitialState;var validateFormFields=function validateFormFields(form){var fieldsToCheck=_utils.R.toPairs(form).filter(function(_ref7){var _ref8=(0,_slicedToArray2.default)(_ref7,2),_ref8$=_ref8[1],isRequired=_ref8$.isRequired,fieldType=_ref8$.fieldType;return isRequired&&fieldType!==_types.FormField.Input;}).reduce(function(acc,_ref9){var _ref10=(0,_slicedToArray2.default)(_ref9,2),fieldObject=_ref10[1];var newValues=_utils.R.cond([[_utils.R.isEqual(_types.FormField.Checkbox),_utils.R.always({checkboxes:[].concat((0,_toConsumableArray2.default)(acc.checkboxes),[fieldObject])})],[_utils.R.isEqual(_types.FormField.SelectPicker),_utils.R.always({selectPickers:[].concat((0,_toConsumableArray2.default)(acc.selectPickers),[fieldObject])})]])(fieldObject.fieldType);return(0,_objectSpread2.default)({},acc,newValues);},{checkboxes:[],selectPickers:[],horizontalPickers:[]});var areCheckboxesValid=fieldsToCheck.checkboxes.every(function(_ref11){var value=_ref11.value;return Boolean(value);});var areSelectPikersValid=fieldsToCheck.selectPickers.map(function(_ref12){var value=_ref12.value;return _utils.R.isDefined(value);}).every(Boolean);var areHorizontalPickersValid=fieldsToCheck.horizontalPickers.map(function(_ref13){var value=_ref13.value;return _utils.R.isDefined(value);}).every(Boolean);return _utils.R.all(areCheckboxesValid,areSelectPikersValid,areHorizontalPickersValid);};exports.validateFormFields=validateFormFields;